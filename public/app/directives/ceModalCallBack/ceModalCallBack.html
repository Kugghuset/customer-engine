<div class="pane">

  <h1>Manage call back</h1>

  <form novalidate>
    
    <div>
      <label>Ticket nunmber</label>
      <span>{{ ticket.ticketId }}</span>
    </div>
    
    <div>
      <label>Customer name</label>
      <span>{{ ticket.customer.orgName }}</span>
    </div>
    
    <div>
      <label>Mobile number</label>
      <span>{{ (ticket.person.tel || ticket.nps.npsTel) | phoneNumber:ticket.country.short }}</span>
    </div>
    
    <div>
      <label>Call category 1</label>
      <span>{{ ticket.category.categoryName || 'No category chosen' }}</span>
    </div>
    
    <div ng-show="ticket.subcategory.subcategoryName">
      <label>Call category 2</label>
      <span>{{ ticket.subcategory.subcategoryName }}</span>
    </div>
    
    <div ng-show="!!ticket.descriptor.descriptorName">
      <label>Call category 3</label>
      <span>{{ ticket.descriptor.descriptorName }}</span>
    </div>
    
    <div>
      <label>Date for SMS send out</label>
      <span>{{ ticket.nps.npsDate | date:'yyyy-MM-dd' }}</span>
    </div>
    
    <div>
      <label>NPS score</label>
      <span>{{ isFinite(ticket.nps.npsScore) ? 'No score' : ticket.nps.npsScore }}</span>
    </div>
    
    <div ng-show="!!ticket.nps.npsComment">
      <label class="text-top">NPS comment</label>
      <span><div ng-repeat="line in splitComments(ticket.nps.npsComment) track by $index">{{ line }}</div></span>
    </div>
    
    <div>
      <label>Assigned agent</label>
      
      <span uib-dropdown uib-keyboard-nav>
        <button id="simple-btn-keyboard-nav" type="button" class="pane-button" uib-dropdown-toggle>
          {{ ticket.callBack.user.name || 'Assign agent' }} <span class="caret"></span>
        </button>
        <ul class="uib-dropdown-menu pane-dropdown" role="menu" aria-labelledby="simple-btn-keyboard-nav">
          <!-- Links need an href for Boostrap UI to work with keyboard navigation -->
          <li role="menuitem"><a href="" ng-click="ticket.callBack.user = undefind">Assign user</a></li>
          <li class="divider"></li>
          <li role="menuitem" ng-repeat="user in users">
            <a href="" ng-click="ticket.callBack.user = user">{{ user.name || user.userId }}</a>
          </li>
        </ul>
      </span>
      
    </div>
    
  </form>

  <div class="float-container">

    <button ng-click="save()" class="pane-button green pull-right offset-right">Save</button>

    <button ng-click="cancel()" class="pane-button red pull-right offset-right">Cancel</button>

  </div>

</div>